# 项目经验总结

## 书写习惯

* 在service类中封装函数，函数中进行数据库的增删改查，其他函数this调用进行业务，使得结构更简洁
* 由于select查询后可能是一个对象或是list,当为一个对象时候，RespCommon内存放的就是个对象，采用重载实现RespCommon中存对象或者list
* "0".equals() 确定字符写左边，防止空指针
* 业务上的无通常包括**null和0**两个情况
* Contorller只做参数格式转换，如果没有参数需要转换的，那么就一行代码。日志/参数校验/权限判断建议放到service里面，毕竟controller基本无法重用，而service重用较多。单元测试也不需要测试controller，直接测试service即可
* service函数尽量写小一点，力求每一个函数都可以单独测试（用junit测试或者main函数测试都没有关系）。这样会节约大量的时间，尤其是代码频繁改动的时候。
* 多思考多抽象和封装。主动思考，主动思考将来可能的各种场景。
* 需求实现先后顺序应该难的/确定的先做。先做难的是需要把周期拉长，更多的时间设计；先做确定的是为了避免频繁的改动。

## 含有上下级关系的处理

* save新增：
  * 判断父节点存在，无就设置自身为根节点
  * 存在父节点，验证父节点在**数据库中真实存在**
* update更新:
  * 验证记录在数据库中真实存在
  * 父子关系不能是父亲是自身
  * 若有父节点验证父节点的存在性
delete删除：
  * 查询子节点，删除所有子节点后删除自身
